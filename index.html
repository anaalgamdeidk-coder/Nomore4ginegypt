<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="حملة شعبية سلمية للمطالبة بترقية البنية التحتية للإنترنت في مصر من 4G إلى 5G">
  <title>لا للـ 4G في مصر - نريد 5G</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    /*
    ============================================
    README - DEPLOYMENT INSTRUCTIONS
    ============================================
    (Same as provided — kept for clarity)
    ============================================
    */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root{
      --primary:#667eea; --primary-dark:#5a67d8; --secondary:#48bb78; --accent:#ed8936;
      --danger:#f56565; --bg-gradient-start:#667eea; --bg-gradient-end:#764ba2;
      --text-primary:#2d3748; --text-secondary:#4a5568; --text-muted:#718096;
      --bg-light:#f7fafc; --bg-white:#ffffff; --border-color:#e2e8f0;
      --shadow-sm:0 1px 3px 0 rgba(0,0,0,0.1); --shadow-md:0 4px 6px -1px rgba(0,0,0,0.1);
      --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1); --shadow-xl:0 20px 25px -5px rgba(0,0,0,0.1);
      --radius-sm:8px; --radius-md:12px; --radius-lg:16px; --radius-xl:20px;
      --spacing-xs:8px; --spacing-sm:12px; --spacing-md:16px; --spacing-lg:24px; --spacing-xl:32px; --spacing-2xl:48px;
    }
    html{ scroll-behavior:smooth; font-size:16px; }
    body{
      font-family:"Cairo", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg,var(--bg-gradient-start) 0%,var(--bg-gradient-end) 100%);
      color:var(--text-primary); line-height:1.6; min-height:100vh; overflow-x:hidden; position:relative;
    }
    body::before, body::after{ content:''; position:fixed; border-radius:50%; background:rgba(255,255,255,0.08); animation:float 20s infinite ease-in-out; pointer-events:none; }
    body::before{ width:500px; height:500px; top:-250px; right:-250px; }
    body::after{ width:400px; height:400px; bottom:-200px; left:-200px; animation-duration:25s; animation-direction:reverse; }
    @keyframes float{ 0%,100%{ transform:translateY(0) rotate(0deg); } 50%{ transform:translateY(-30px) rotate(10deg); } }

    h1,h2,h3,h4,h5,h6{ font-weight:700; line-height:1.2; margin-bottom:var(--spacing-md); color:var(--text-primary); }
    h1{ font-size:clamp(2rem,5vw,3rem); } h2{ font-size:clamp(1.75rem,4vw,2.5rem); } h3{ font-size:clamp(1.5rem,3vw,2rem); }
    p{ margin-bottom:var(--spacing-md); color:var(--text-secondary); }
    a{ color:var(--primary); text-decoration:none; transition:color .3s; } a:hover{ color:var(--primary-dark); }

    .container{ max-width:1200px; margin:0 auto; padding:0 var(--spacing-md); position:relative; z-index:1; }
    .section{ padding:var(--spacing-2xl) 0; }

    .hero{ background: rgba(255,255,255,0.98); backdrop-filter: blur(20px); border-radius:var(--radius-xl); padding:var(--spacing-2xl) var(--spacing-xl); margin:var(--spacing-xl) 0; box-shadow:var(--shadow-xl); text-align:center; animation:slideDown .6s ease-out; }
    @keyframes slideDown{ from{opacity:0; transform:translateY(-50px);} to{opacity:1; transform:translateY(0);} }
    .hero-icon{ width:100px; height:100px; margin:0 auto var(--spacing-lg); background:linear-gradient(135deg,var(--primary),var(--bg-gradient-end)); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:3rem; box-shadow:0 10px 30px rgba(102,126,234,0.5); animation:pulse 3s infinite; }
    @keyframes pulse{ 0%,100%{ transform:scale(1); box-shadow:0 10px 30px rgba(102,126,234,0.5); } 50%{ transform:scale(1.08); box-shadow:0 15px 40px rgba(102,126,234,0.7); } }
    .hero-subtitle{ font-size:1.125rem; color:var(--text-muted); max-width:700px; margin:0 auto var(--spacing-lg); line-height:1.7; }

    .card{ background: rgba(255,255,255,0.98); backdrop-filter: blur(20px); border-radius:var(--radius-xl); padding:var(--spacing-xl); margin-bottom:var(--spacing-lg); box-shadow:var(--shadow-lg); transition:all .3s ease; animation:slideUp .6s ease-out both; }
    @keyframes slideUp{ from{opacity:0; transform:translateY(30px);} to{opacity:1; transform:translateY(0);} }
    .card-header{ display:flex; align-items:center; gap:var(--spacing-md); margin-bottom:var(--spacing-lg); padding-bottom:var(--spacing-md); border-bottom:3px solid var(--border-color); }
    .card-icon{ width:60px; height:60px; background:linear-gradient(135deg,var(--primary),var(--bg-gradient-end)); border-radius:var(--radius-md); display:flex; align-items:center; justify-content:center; font-size:2rem; flex-shrink:0; box-shadow:var(--shadow-md); }
    .card-title{ font-size:1.5rem; margin:0; }

    .stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:var(--Spacing-lg); margin:var(--spacing-lg) 0; }
    .stat-item{ background:linear-gradient(135deg,var(--bg-light),#edf2f7); padding:var(--spacing-lg); border-radius:var(--radius-lg); text-align:center; border:2px solid var(--border-color); transition:all .3s ease; }
    .stat-number{ font-size:2.5rem; font-weight:800; color:var(--primary); display:block; margin-bottom:var(--spacing-xs); }
    .stat-label{ color:var(--text-secondary); font-size:.875rem; font-weight:600; }

    .steps-list{ display:grid; gap:var(--spacing-md); }
    .step-item{ background:linear-gradient(135deg,var(--bg-light),#edf2f7); padding:var(--spacing-lg); border-radius:var(--radius-lg); border-right:5px solid var(--primary); transition:all .4s cubic-bezier(0.4,0,0.2,1); }
    .step-number{ background:linear-gradient(135deg,var(--primary),var(--bg-gradient-end)); color:white; min-width:45px; height:45px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.25rem; flex-shrink:0; box-shadow:var(--shadow-md); }
    .step-content{ padding-right:60px; color:var(--text-secondary); line-height:1.8; }

    input[type="text"], input[type="email"], input[type="tel"], textarea { width:100%; padding:var(--spacing-md); border:2px solid var(--border-color); border-radius:var(--radius-md); font-family:inherit; font-size:1rem; background:var(--bg-light); transition:all .3s ease; }
    input:focus, textarea:focus { outline:none; border-color:var(--primary); background:white; box-shadow:0 0 0 3px rgba(102,126,234,0.1); }
    textarea{ resize:vertical; min-height:150px; }

    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:var(--spacing-sm); padding:var(--spacing-md) var(--spacing-lg); border:none; border-radius:var(--radius-md); font-family:inherit; font-size:1rem; font-weight:600; cursor:pointer; transition:all .3s ease; text-decoration:none; box-shadow:var(--shadow-md); }
    .btn-primary{ background:linear-gradient(135deg,var(--primary),var(--bg-gradient-end)); color:white; }
    .btn-secondary{ background:linear-gradient(135deg,var(--secondary),#38a169); color:white; }
    .btn-accent{ background:linear-gradient(135deg,var(--accent),#dd6b20); color:white; }
    .btn-outline{ background:white; color:var(--primary); border:2px solid var(--primary); }
    .btn-full{ width:100%; }

    .complaint-template{ background:white; padding:var(--spacing-lg); border-radius:var(--radius-md); border:2px solid var(--border-color); margin:var(--spacing-lg) 0; font-family:"Cairo", monospace; white-space:pre-wrap; direction:rtl; line-height:1.8; }

    .petition-form{ background:linear-gradient(135deg,var(--bg-light),#edf2f7); padding:var(--spacing-xl); border-radius:var(--radius-lg); margin:var(--spacing-lg) 0; }
    .petition-count{ text-align:center; padding:var(--spacing-lg); background:white; border-radius:var(--radius-md); margin-bottom:var(--spacing-lg); box-shadow:var(--shadow-sm); }
    .petition-number{ font-size:3rem; font-weight:800; color:var(--primary); display:block; margin-bottom:var(--spacing-xs); }
    .petition-label{ color:var(--text-secondary); font-size:1.125rem; }

    .signatures-list{ max-height:300px; overflow-y:auto; background:white; border-radius:var(--radius-md); padding:var(--spacing-md); margin-top:var(--spacing-lg); }
    .signature-item{ padding:var(--spacing-sm); border-bottom:1px solid var(--border-color); display:flex; align-items:center; gap:var(--spacing-sm); }
    .signature-name{ font-weight:600; color:var(--text-primary); } .signature-date{ margin-right:auto; font-size:.875rem; color:var(--text-muted); }

    .alert{ padding:var(--spacing-md); border-radius:var(--radius-md); margin-bottom:var(--spacing-lg); border-right:4px solid; display:flex; align-items:flex-start; gap:var(--spacing-sm); }
    .alert-info{ background:#ebf8ff; border-color:#3182ce; color:#2c5282; }

    .toast{ position:fixed; top:20px; left:50%; transform:translateX(-50%) translateY(-100px); background:white; padding:var(--spacing-md) var(--spacing-lg); border-radius:var(--radius-md); box-shadow:0 10px 40px rgba(0,0,0,0.2); z-index:1000; display:flex; align-items:center; gap:var(--spacing-sm); opacity:0; transition:all .3s ease; max-width:90%; }
    .toast.show{ transform:translateX(-50%) translateY(0); opacity:1; }
    .toast-icon{ font-size:1.5rem; } .toast-message{ color:var(--text-primary); font-weight:600; }

    .footer{ text-align:center; padding:var(--spacing-2xl) var(--spacing-md); color:white; margin-top:var(--spacing-2xl); }
    .footer a{ color:white; opacity:.9; } .footer a:hover{ opacity:1; }

    @media print { body{ background:white } body::before, body::after { display:none } .no-print{ display:none !important } .hero, .card { box-shadow:none; border:1px solid #ddd } .complaint-template{ page-break-inside:avoid } }
    @media (max-width:768px) { .hero{ padding:var(--spacing-lg) var(--spacing-md) } .hero-icon{ width:80px; height:80px; font-size:2.5rem } .card{ padding:var(--spacing-lg) var(--spacing-md) } .btn{ width:100% } }
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border-width:0 }
    :focus-visible{ outline:2px solid var(--primary); outline-offset:2px }
    .text-center{ text-align:center } .mb-0{ margin-bottom:0 } .mb-1{ margin-bottom:var(--spacing-xs) } .mb-2{ margin-bottom:var(--spacing-sm) } .mb-3{ margin-bottom:var(--spacing-md) } .mb-4{ margin-bottom:var(--spacing-lg) }
  </style>
</head>
<body>
  <!-- Toast notification (hidden by default) -->
  <div id="toast" class="toast" role="alert" aria-live="polite" aria-atomic="true">
    <span class="toast-icon" id="toastIcon">✓</span>
    <span class="toast-message" id="toastMessage"></span>
  </div>

  <div class="container">
    <!-- HERO -->
    <header class="hero" role="banner">
      <div class="hero-icon" aria-hidden="true">🚀</div>
      <h1>لا للـ <span class="highlight">4G</span> في مصر</h1>
      <p class="hero-subtitle">
        حملة شعبية سلمية للمطالبة بحق المصريين في بنية تحتية حديثة للاتصالات.
        نريد ترقية الشبكات من 4G إلى 5G لمواكبة التطور العالمي وتحسين جودة الخدمة.
      </p>
      <div class="alert alert-info" role="status">
        <span aria-hidden="true">🔒</span>
        <div>
          <strong>خصوصيتك مهمة:</strong>
          هذا الموقع لا يستخدم أي تتبع أو تحليلات. جميع البيانات تبقى على جهازك فقط ولا تُرسل لأي جهة.
        </div>
      </div>
    </header>

   <!-- WHY 5G -->
<section class="section" id="why-5g">
  <div class="card">
    <div class="card-header">
      <div class="card-icon" aria-hidden="true">📊</div>
      <h2 class="card-title">لماذا نحتاج 5G؟</h2>
    </div>

    <div class="stats-grid">
      <div class="stat-item" style="background: linear-gradient(135deg, #007bff, #00c6ff);">
        <span class="stat-number">10×</span>
        <span class="stat-label">أسرع من 4G</span>
      </div>
      <div class="stat-item" style="background: linear-gradient(135deg, #28a745, #5ce65c);">
        <span class="stat-number">1ms</span>
        <span class="stat-label">زمن استجابة منخفض</span>
      </div>
      <div class="stat-item" style="background: linear-gradient(135deg, #ffc107, #ff9800);">
        <span class="stat-number">100×</span>
        <span class="stat-label">أجهزة أكثر متصلة</span>
      </div>
      <div class="stat-item" style="background: linear-gradient(135deg, #dc3545, #ff4b5c);">
        <span class="stat-number">99.9%</span>
        <span class="stat-label">موثوقية الشبكة</span>
      </div>
    </div>

    <div class="steps-list mt-4">
      <div class="step-item">
        <div class="step-header">
          <div class="step-number">1</div>
          <h3 class="step-title">سرعة فائقة للإنترنت</h3>
        </div>
        <div class="step-content">
          تصل سرعة 5G إلى 10 أضعاف سرعة 4G، مما يعني تنزيل الملفات الكبيرة في ثوانٍ، ومشاهدة الفيديو بدقة 4K و 8K بدون تقطيع.
        </div>
      </div>

      <div class="step-item">
        <div class="step-header">
          <div class="step-number">2</div>
          <h3 class="step-title">دعم التحول الرقمي</h3>
        </div>
        <div class="step-content">
          5G ضرورية للتعليم عن بُعد، العمل من المنزل، الرعاية الصحية الرقمية، والمدن الذكية. بدونها نتخلف عن العالم.
        </div>
      </div>

      <div class="step-item">
        <div class="step-header">
          <div class="step-number">3</div>
          <h3 class="step-title">تنمية الاقتصاد الرقمي</h3>
        </div>
        <div class="step-content">
          الشركات والمطورون يحتاجون 5G لتطوير تطبيقات متقدمة، الذكاء الاصطناعي، إنترنت الأشياء، والابتكار المحلي. الاستثمار في 5G يعني فرص عمل واستثمار أقوى.
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  #why-5g {
    margin: 50px auto;
    max-width: 900px;
  }

  #why-5g .card {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  #why-5g .card-header {
    background: linear-gradient(135deg, #6f42c1, #007bff);
    color: #fff;
    display: flex;
    align-items: center;
    padding: 20px;
  }

  #why-5g .card-icon {
    font-size: 28px;
    margin-left: 10px;
  }

  #why-5g .card-title {
    margin: 0;
    font-size: 22px;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;
    padding: 20px;
  }

  .stat-item {
    border-radius: 12px;
    padding: 20px;
    color: #fff;
    text-align: center;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .stat-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
  }

  .stat-number {
    font-size: 28px;
    font-weight: bold;
    display: block;
  }

  .stat-label {
    font-size: 16px;
  }

  .steps-list {
    padding: 20px;
  }

  .step-item {
    background: #f8f9fa;
    border-left: 5px solid #007bff;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    transition: 0.3s ease;
  }

  .step-item:hover {
    background: #e9f0ff;
  }

  .step-header {
    display: flex;
    align-items: center;
  }

  .step-number {
    background: #007bff;
    color: #fff;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    text-align: center;
    line-height: 32px;
    font-weight: bold;
    margin-left: 10px;
  }

  .step-title {
    font-size: 18px;
    margin: 0;
  }

  .step-content {
    margin-top: 10px;
    font-size: 15px;
    color: #333;
  }
</style>


    <!-- COMPLAINT TEMPLATE -->
    <section class="section" id="complaint">
      <div class="card" aria-labelledby="complaintTitle">
        <div class="card-header">
          <div class="card-icon" aria-hidden="true">✉️</div>
          <h2 id="complaintTitle" class="card-title">قوالب الشكوى الجاهزة</h2>
        </div>

        <div class="complaint-template" id="complaintText" contenteditable="false" role="region" aria-label="نموذج الشكوى">
الموضوع: شكوى بخصوص خدمة الإنترنت/الموبايل في [المنطقة] — طلب تدخل NTRA

السلام عليكم،

أنا أرفع شكوى عن ضعف جودة خدمة الإنترنت في المنطقة التالية: [الحي/المدينة]. شركة الاتصالات: [اسم الشركة]. التواريخ التي تأثرت فيها الخدمة: [تواريخ]. نتائج قياس السرعة: تحميل [Mbps] - رفع [Mbps]. رقم الشكوى لدى الشركة: [رقم].

حاولت حل المشكلة مع الشركة ولم أجد تجاوبًا كافياً. أرجو من جهاز تنظيم الاتصالات (NTRA) التحقيق واتخاذ الإجراءات اللازمة لضمان جودة الخدمة وحقوق المستهلكين.

شكراً،
[الاسم]
[التليفون]
[البريد الإلكتروني]
        </div>

        <div class="btn-group" role="group" aria-label="إجراءات الشكوى">
          <button class="btn btn-primary" onclick="copyComplaint()">انسخ النص</button>
          <button class="btn btn-outline" onclick="openMail()">افتح الإيميل</button>
          <button class="btn btn-secondary" onclick="openWhatsApp()">أرسل على واتساب</button>
          <button class="btn btn-accent" onclick="printComplaint()">طباعة</button>
        </div>

      </div>
    </section>
<!-- PETITION (GOOGLE FORM LINK) -->
<section class="section" id="petitionSection">
  <div class="card" style="text-align:center;">
    <div class="card-header">
      <div class="card-icon" aria-hidden="true">📝</div>
      <h2 id="petitionTitle" class="card-title">شارك في العريضة</h2>
    </div>

    <p class="small">ساعدنا نطالب بتحسين الإنترنت في مصر — اضغط الزر واملأ النموذج على Google Forms.</p>

    <button class="btn btn-primary"
      onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSduKpzkDvEEEdcyaoKPkboCq8UUKt_W3gOdXSzj8TuPe3OtIQ/viewform?usp=header', '_blank')">
      الانتقال إلى العريضة على Google Forms
    </button>
  </div>
</section>

    <!-- ==== NEW: CALL NTRA SECTION (CTA) ==== -->
    <section class="section" id="call-ntra">
      <div class="card" aria-labelledby="callTitle">
        <div class="card-header">
          <div class="card-icon" aria-hidden="true">📞</div>
          <h2 id="callTitle" class="card-title">اتصل الآن بـ NTRA</h2>
        </div>

        <p class="mb-2">لو عايز تتابع شكوتك بسرعة أو تحكي لمركز الشكاوى مباشرة، تقدر تتصل بالخط الساخن أو بالخط الرئيسي. لو إنت على موبايل هيتفتح تطبيق الاتصال تلقائيًا.</p>

        <div class="btn-group" role="group" aria-label="خيارات الاتصال">
          <!-- Short code (mobile) -->
          <button class="btn btn-primary btn-full" onclick="callNTRA('155','الرقم المختصر 155')">📱 اتصل على 155 (من الموبايل)</button>

          <!-- Main landline -->
          <button class="btn btn-secondary btn-full" onclick="callNTRA('+20235344000','الخط الرئيسي +20 2 3534 4000')">📞 اتصل بالخط الرئيسي +20 2 3534 4000</button>

          <!-- WhatsApp/contact -->
          <button class="btn btn-accent btn-full" onclick="openWhatsAppToNTRA()">💬 تواصل على واتساب</button>
        </div>

        <div style="margin-top:16px; color:var(--text-muted);">
          <strong>معلومة:</strong> مركز الشكاوى يعمل من 8 صباحاً لـ10 مساءً عادةً. لو مافيش استجابة، احتفظ برقم الشكوى وكرر الاتصال.
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer no-print" role="contentinfo">
      <p>شارك الحملة بسلمية — حافظ على خصوصيتك. الموقع لا يرسل بيانات خارج جهازك.</p>
      <div class="footer-links">
        <a class="footer-link" href="#complaint">قوالب الشكوى</a>
        <a class="footer-link" href="#petitionSection">العريضة المحلية</a>
        <a class="footer-link" href="#call-ntra">اتصل الآن</a>
      </div>
    </footer>
  </div>

  <script>
    // =========================
    // Toast helper
    // =========================
    const toastEl = document.getElementById('toast');
    const toastMsg = document.getElementById('toastMessage');
    const toastIcon = document.getElementById('toastIcon');
    let toastTimer = null;
    function showToast(message, icon = '✓', ms = 2500){
      clearTimeout(toastTimer);
      toastMsg.textContent = message;
      toastIcon.textContent = icon;
      toastEl.classList.add('show');
      toastTimer = setTimeout(()=> toastEl.classList.remove('show'), ms);
    }

    // =========================
    // Complaint actions
    // =========================
    function copyComplaint(){
      const txt = document.getElementById('complaintText').innerText.trim();
      if(!txt){ showToast('مفيش نص للنسخ', '⚠'); return; }
      navigator.clipboard?.writeText(txt).then(()=> showToast('النص اتنسخ — عدل قبل الإرسال')) .catch(()=> { prompt('انسخ النص يدوياً:', txt); });
    }
    function openMail(){
      const subject = encodeURIComponent('شكوى بخصوص خدمة الإنترنت');
      const body = encodeURIComponent(document.getElementById('complaintText').innerText.trim());
      window.location.href = 'mailto:complaints@tra.gov.eg?subject=' + subject + '&body=' + body;
    }
    function openWhatsApp(){
      const waNumber = '201202155155'; // example; adjust if needed
      const text = encodeURIComponent(document.getElementById('complaintText').innerText.trim());
      window.open('https://wa.me/' + waNumber + '?text=' + text, '_blank');
    }
    function printComplaint(){
      window.print();
    }

    // =========================
    // Petition (localStorage)
    // =========================
    const PET_KEY = 'eg_no_more_4g_petition_v1';
    function loadSignatures(){ try{ return JSON.parse(localStorage.getItem(PET_KEY) || '[]'); } catch(e){ return []; } }
    function saveSignatures(list){ localStorage.setItem(PET_KEY, JSON.stringify(list)); }
    function renderSignatures(){
      const list = loadSignatures();
      const container = document.getElementById('signaturesList');
      const number = document.getElementById('petitionNumber');
      container.innerHTML = '';
      number.textContent = list.length;
      if(list.length === 0){
        container.innerHTML = '<div id="noSign" class="small">مافيش توقيعات لسه.</div>';
        return;
      }
      list.slice().reverse().forEach(s => {
        const item = document.createElement('div');
        item.className = 'signature-item';
        item.innerHTML = `<div class="signature-name">${escapeHtml(s.name)}</div><div class="signature-date">${escapeHtml(s.area || '')} • ${escapeHtml(s.phone || '')}</div>`;
        container.appendChild(item);
      });
    }
    function addSignature(){
      const name = document.getElementById('sigName').value.trim();
      const phone = document.getElementById('sigPhone').value.trim();
      const area = document.getElementById('sigArea').value.trim();
      if(!name){ alert('اكتب الاسم الأول!'); return; }
      const list = loadSignatures();
      list.push({ name, phone, area, ts: new Date().toISOString() });
      saveSignatures(list);
      document.getElementById('sigName').value = '';
      document.getElementById('sigPhone').value = '';
      document.getElementById('sigArea').value = '';
      renderSignatures();
      showToast('تم إضافة توقيع محليًا');
    }
    function clearSignatures(){
      if(!confirm('هل أنت متأكد أنك عايز تمسح كل التوقيعات من جهازك؟ العملية محلية ولن تُستعاد.')) return;
      localStorage.removeItem(PET_KEY);
      renderSignatures();
      showToast('تم مسح التوقيعات المحلية');
    }
    function escapeHtml(str = ''){ return String(str).replace(/[&<>"']/g, (m)=> ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]) ); }
    renderSignatures();

    // =========================
    // CALL NTRA - main addition
    // =========================
    // Attempts to open a tel: link. If not on a phone, shows the number and instructions.
    function isMobileDevice(){
      return /Mobi|Android|iPhone|iPad|iPod|Windows Phone|webOS/i.test(navigator.userAgent);
    }

    function callNTRA(number, label){
      // normalize number for tel: (remove spaces)
      const tel = 'tel:' + String(number).replace(/\s+/g,'');
      if(isMobileDevice()){
        // On mobile, try to open the dialer
        window.location.href = tel;
        showToast('جارٍ فتح تطبيق الاتصال...', '📞');
      } else {
        // Desktop fallback: show alert with number and copy option
        const msg = `${label}\n\nاتصل بالرقم باستخدام هاتفك أو تطبيق الاتصال: ${number}`;
        if (confirm(msg + '\n\nنسخ الرقم إلى الحافظة؟')) {
          try {
            navigator.clipboard.writeText(number);
            showToast('تم نسخ الرقم إلى الحافظة', '📋');
          } catch(e){
            prompt('انسخ الرقم يدوياً:', number);
          }
        }
      }
    }

    // Dedicated WhatsApp to NTRA — opens WhatsApp chat
    function openWhatsAppToNTRA(){
      const waNumber = '201202155155'; // example national contact (update if official)
      const pre = encodeURIComponent('تحية طيبة، أود تقديم شكوى عن جودة خدمة الإنترنت في منطقتي. التفاصيل: ');
      window.open('https://wa.me/' + waNumber + '?text=' + pre, '_blank');
    }

    // Ensure keyboard accessibility for call buttons
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){ // hide toast quickly
        toastEl.classList.remove('show');
      }
    });

    // Accessibility: focus outlines for buttons already handled by :focus-visible
  </script>
</body>
</html>

